{% extends 'base.html' %}
{% block content %}
{{block.super}}
<div class="col-md-3">
    <div class="dropdown">
        <button onclick="myFunction1()" class=" w3-button dropbtn">Filter by Category</button>
        <div id="myDropdown" class="dropdown-content">
            {% for my_catpic in catpic %}
            <a href="/category/{{my_catpic.id}}">{{my_catpic.category_name}}</a>
            {% endfor %}
        </div>
    </div>


    <script>
        /* When the user clicks on the button, 
        toggle between hiding and showing the dropdown content */
        function myFunction1() {
            document.getElementById("myDropdown").classList.toggle("show");
        }

        // Close the dropdown if the user clicks outside of it
        window.onclick = function (event) {
            if (!event.target.matches('.dropbtn ')) {
                var dropdowns = document.getElementsByClassName("dropdown-content");
                var i;
                for (i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                        openDropdown.classList.remove('show');
                    }
                }
            }
        }

    </script>
    <div class="w3-dropdown-click">
        <button onclick="myFunction2()" class="w3-button  dropbtn">Filter by Location</button>
        <div id="Demo" class="w3-dropdown-content w3-bar-block w3-border">
            {% for my_loc in loc_pic %}
            <a href="/location/{{my_loc.id}}" class="w3-bar-item w3-button"> {{my_loc.location_name}} </a>
            <p>{{locationpic}}</p>
            {% endfor %}
        </div>
    </div>

    <script>
            function myFunction2() {
              var x = document.getElementById("Demo");
              if (x.className.indexOf("w3-show") == -1) {
                x.className += " w3-show";
              } else { 
                x.className = x.className.replace(" w3-show", "");
              }
            }
            </script>

</div>
<div class="container">
    {% for pic in pics %}
    <script>
        function myFunction() {
            alert(" {{pic.image.url}} ");
            alert("Link copied")
        }


    </script>
    <div class="row">
        <!-- <a href="/single_pic/{{pic.id}}">
            <img width="450px"  src="{{pic.image.url}}" alt="image">
        </a> -->


        {{pic.name}}
        {{pic.description}} <br>




        <button type="button" class="btn btn-styled" data-toggle="modal" data-target="#myModal{{pic.id}}">
            <img width="450px" src="{{pic.image.url}}" alt="image">
        </button> <br>
        <a class="btn btn-success" href="/single_pic/{{pic.id}} ">More</a>

        {% endfor %}
        <!-- Modal -->
        {% for pic in pics  %}
        <div class="modal fade" id="myModal{{pic.id}}" role="dialog">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">{{pic.name}}</h4>
                    </div>
                    <div class="modal-body">
                        <img width="400px" class="img-responsive" src=" {{pic.image.url}} " alt="img">
                        <p>{{pic.description}}</p>
                        <p>{{pic.category}}</p>
                        <p> {{pic.location}} </p>
                    </div>
                    <div class="modal-footer">
                        <p>{{pic.author}}</p>
                        <a href="{{ pic.image.url }}"> <input class="form-control" type="text"
                                value="{{ pic.image.url }}" id="link"></a>
                        <a onclick="myFunction()"><button type="button" class="btn btn-outline-success">Copy
                                Link</button></a>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}


    </div>




</div>


<style>
    .btn-styled {
        padding: 0;
        border: none;
        background: none;
    }

    .dropbtn {
        background-color: #3498DB;
        color: white;
        padding: 16px;
        font-size: 16px;
        border: none;
        cursor: pointer;
    }

    .dropbtn:hover,
    .dropbtn:focus {
        background-color: gray;
    }

    .dropdown {
        position: relative;
        display: inline-block;
    }

    .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f1f1f1;
        min-width: 160px;
        overflow: auto;
        box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
        z-index: 1;
    }

    .dropdown-content a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
    }

    .dropdown a:hover {
        background-color: #ddd;
    }

    .show {
        display: block;
    }
</style>
{% endblock %}